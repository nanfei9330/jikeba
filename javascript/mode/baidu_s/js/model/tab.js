//模块作用：控制切换事件，左右栏的导航与内容的切换，右上角更多的切换
//使用了单例模式
define(function(require, exports, module) {
    var $ = require('jquery');
    var tab = {};
    tab.init = function() {
        var me = this;
        me.render();
        me.bind();
    };
    //指定元素
    tab.render = function() {
        var me = this;
        //左栏导航
        me.menu = $(".user-menu a");
        //右栏导航
        me.contentTab = $(".s-content .tab");
        //更多产品
        me.moreproduct = $('.moreproduct');
        me.moreLink = $('.tj_link_wrapper');
    };

    //给元素绑定事件
    tab.bind = function() {
        var me = this;
        //左栏导航点击事件
        me.menu.click(function() {
            $(".user-menu a").removeClass("current");
            $(this).addClass("current");
            var tid = $(this).attr("data-tid") - 1;
            var height = 320;
            $(".model-con").animate({
                "top": -height * tid
            });
        });
        //右栏导航点击事件
        me.contentTab.click(function() {
            var p = $(this).parents(".s-content");
            var tabs = p.find(".tab");
            var index = tabs.index(this);
            tabs.removeClass("tab-on");
            $(this).addClass("tab-on");
            p.find(".inner").hide();
            p.find(".inner").eq(index).show();
        });                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
        //更多产品hover事件
        me.moreproduct.hover(function() {
            $('.tj_link_wrapper').show();
        });
        me.moreLink.hover(function() {
            $('.tj_link_wrapper').show();
        }, function() {
            $('.tj_link_wrapper').hide();
        });
    };


    module.exports = tab;
});

